// 计算两个浮点向量的点积 (Dot Product)
float dot_product(float a[], float b[], int n) {
    float sum = 0.0;
    int i = 0;
    while (i < n) {
        // 测试数组取值 load 和浮点乘法
        sum = sum + a[i] * b[i];
        i = i + 1;
    }
    return sum;
}

int main() {
    float vec1[4];
    float vec2[4];

    // 手动初始化，测试 store 指令
    vec1[0] = 1.0; vec1[1] = 2.0; vec1[2] = 3.0; vec1[3] = 4.0;
    vec2[0] = 4.0; vec2[1] = 3.0; vec2[2] = 2.0; vec2[3] = 1.0;

    // 预期结果: 1*4 + 2*3 + 3*2 + 4*1 = 4 + 6 + 6 + 4 = 20.0
    float result = dot_product(vec1, vec2, 4);

    if (result == 20.0) putint(1); else putint(0);
    putch(10);

    // 修改数组内容再次测试
    vec1[0] = 0.5;
    vec2[0] = 20.0; 
    // vec1[0]*vec2[0] = 10.0
    // 其余不变: 6 + 6 + 4 = 16.0
    // 总和: 26.0
    
    result = dot_product(vec1, vec2, 4);
    if (result == 26.0) putint(1); else putint(0);
    putch(10);

    return 0;
}